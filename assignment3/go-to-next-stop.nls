to go-to-next-stop
  ; it it reaches the next stop, pick and drop passengers
  if next_stop = -1 
    [
      ; indicate next stop in route
      set bus_stop_counter bus_stop_counter + 1
      
      ; drop passengers
      if intention_act = "drop-off"
      [foreach bus_passengers
        [ 
          if item 1 ? = current_stop 
            [drop-off-passenger first ? 
              
               print (word "Current stop: " current_stop ". Passenger: " first ?)]
          if at-junction? and not member? item 1 ? bus_route
             [drop-off-passenger first ?
               print (word "Current stop: " current_stop ". Passenger: " first ?)]
        ]
      ]
    
      ; pick up passengers
      if intention_act = "pick-up"
      [if length bus_passengers < capacity ; if bus not full
        [foreach get-passengers-at-stop current_stop ; for all waiting passengers
          [ if length bus_passengers < capacity 
            [if member? item 1 ? bus_route and not at-junction?
              [pick-up-passenger first ? 
                print (word "Bus passengers: " bus_passengers)
                ]
            ]
          ]
        ] 
      ]
    ]
  
  ; if completed route, reset route
  if bus_stop_counter = length bus_route [set bus_stop_counter 1]
  set next_stop item bus_stop_counter bus_route
  
  ; go to next stop
  if intention_act = "go" [travel-to next_stop]

end